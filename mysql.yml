- name: setup Mysql with medium_db db and remote login
  become: yes
  hosts: web
  tasks:

    - name: Install myslq
      package:
        name: mariadb-server
        state: present

    - name: start and enable mysql service
      service:
        name: mysql
        state: started
        enabled: yes

    - name: creating wordpress database
      mysql_db:
        name: "wordpress"
        state: present

    - name: creating mysql user
      mysql_user:
        name: "wordpress"
        password: "wordpress"
        priv: 'wordpress.*:ALL'
        host: '%'
        column_case_sensitive: true
        state: present

  handlers:
    - name: Restart mysql
      service:
        name: mysql
        state: restarted
